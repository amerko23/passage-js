const PassageJs=function(){"use strict";let e=document.querySelector("script[data-name='valor_passage']"),t=document.getElementById("valor-fields"),a=e.src,i=a.substring(0,a.lastIndexOf("/")+1);var n=i.replace("/js/","/images/");if(!e||!e.getAttribute("data-clientToken")||!e.getAttribute("data-epi")||!t)return;let r=[],l=e.getAttribute("data-clientToken"),o=e.getAttribute("data-epi"),d=!!e.getAttribute("data-demo"),c=d?"https://securelink-staging.valorpaytech.com:4430":"https://securelink.valorpaytech.com:4430",s=e.getAttribute("data-variant"),p=e.getAttribute("data-valorLogo"),u=e.getAttribute("data-cardholderName"),g=e.getAttribute("data-defaultCardholderName")?e.getAttribute("data-defaultCardholderName"):"",h=e.getAttribute("data-Email"),m=e.getAttribute("data-defaultEmail")??"",v=e.getAttribute("data-Phone"),$=e.getAttribute("data-defaultPhone")??"",b=e.getAttribute("data-billingAddress"),x=e.getAttribute("data-defaultAddress1")??"",f=e.getAttribute("data-defaultAddress2")??"",y=e.getAttribute("data-defaultCity")??"",_=e.getAttribute("data-defaultState")??"",w=e.getAttribute("data-defaultZip")??"",k=e.getAttribute("data-submitText")??"Buy Now",A=null,E=null,C=null,L=null,T=null,I=!1,N=!1,M=!1,B=!0,S=null,q=null,D=null,P=null,V=null,z=e.getAttribute("data-submitBg")?e.getAttribute("data-submitBg"):"#005cb9",Y=e.getAttribute("data-submitColor")?e.getAttribute("data-submitColor"):"#fff",O=`#valor-checkout-form {width: 80%; font-family: 'roboto'} #valor-logo {margin-bottom: 20px;} #valor-logo img {width: 225px;} #valor-checkout-form label {margin-top: 10px; font-family: roboto; font-weight: 500; color: #697386;}
    #valor-checkout-form input, #valor-checkout-form select {display:block; width: 100%; padding: 6px 12px; color: #555; background-color: #fff; background-image: none; outline: none; font-size: 14px; height: 40px; border: 1px solid rgba(60, 66, 87, 0.12); border-radius: 8px; box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%);} #valor-checkout-form input:focus, #valor-checkout-form select:focus {border-color: ${z}; box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(102 175 233 / 60%);} #valor-checkout-form input[type="checkbox"] {width: 17px; height: 17px; vertical-align: sub; display: inline-block;}
    .separator {display: flex; align-items: center; text-align: center;} .separator::before, .separator::after {content: ''; flex: 1; border-bottom: 1px solid #000;} .separator:not(:empty)::before {margin-right: .25em;} .separator:not(:empty)::after {margin-left: .25em;} .gpay-button.new_style {border-radius: 4px !important;} .gpay-button.black.short.new_style, .gpay-button.black.plain.new_style {min-width: 250px !important;}
    #cards .d-flex { width: fit-content; position: absolute; top: 10px; right: 5px; } .d-flex span{ margin: 0 5px;} .card_error{ color: red;} button#passage-submit, div#pay-now { font-family: Roboto; color: ${Y}; background: ${z}; width: 45%; border-radius: 4px; border: none; box-shadow: 0px -1px 1px rgb(0 0 0 / 12%), 0px 2px 5px rgb(0 0 0 / 12%), 0px 1px 1px rgb(0 0 0 / 8%); margin: 20px 10px 20px 0; padding: 15px 30px;} #cards { position:relative; } #card_fields,#address_ct{display: flex; width: 100%; justify-content: space-between} #exp,#cvv,#passage-city,#passage-state{width: 50%;} #cc-policy a {font-weight: 800; color: ${z};} button#passage-submit[disabled], button#pay-now[disabled] {cursor: not-allowed; opacity: 0.65;} div#passage-cancel {display: inline-block; font-family: Roboto; color: #fff; background: #000; width: 45%; border-radius: 4px; border: none; box-shadow: 0px -1px 1px rgb(0 0 0 / 12%), 0px 2px 5px rgb(0 0 0 / 12%), 0px 1px 1px rgb(0 0 0 / 8%); margin: 20px 10px; padding: 15px 30px; text-align: center; cursor: pointer;} div#pay-now{ cursor: pointer; text-align:center;} .valor-modal{ position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1050; display: none; justify-content: center; align-items: center; background: #0005;} div#passage-popup-inner{ padding: 15px 20px; background: #fff; border-radius: 5px;box-shadow: 0 5px 15px rgb(0 0 0 / 50%);} div#card-popup{width: 600px; margin: 30px auto; position: relative;}
    @media only screen and (max-width: 580px) {#valor-checkout-form {width: 95%; margin: 5% auto;} button#passage-submit, div#pay-now { margin: 20px 0px;} div#card-popup{ margin: 50% 5%;} div#card-popup{width: 400px; margin: 30px auto; position: relative;}} .passage-loader {display: inline-block;width: 20px;height: 20px;border-radius: 50%;border: 3px solid rgba(0, 0, 0, 0.3);border-top-color: #fff;animation: passage-loader 0.6s linear infinite;margin-left: 5px;vertical-align: middle;} @keyframes passage-loader {to {transform: rotate(360deg);}}`;function W(){if(!0===I&&!0===N&&!0===M&&!0===B){A.disabled=!1;return}A.disabled=!0}function j(){let e=T.value;if(""===(e=e.replace(/[^0-9]/g,""))){T.value="";return}if(e.length<4){T.value=e;return}if(e.length<7){let t="("+e.slice(0,3)+") "+e.slice(3);T.value=t;return}let a="("+e.slice(0,3)+") "+e.slice(3,6)+"-"+e.slice(6);T.value=a}function H(){let e=this.value.replace(/[^0-9]/g,"");e.length&&e.length<10?(P.innerText="Phone Number Should be 10 digit",T.classList.add("card-error"),B=!1):(P.innerText="",T.classList.remove("card-error"),B=!0),this.classList.toggle("card-error",!B),W()}return{init:function(){setTimeout(function(){alert("Your payment session has expired. Please start a new payment session to continue with your purchase."),A.style.display="none"},3e5),function e(){let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");t.appendChild(a),a.appendChild(document.createTextNode(O))}(),function e(){"true"===p&&r.push({tag:"div",id:"valor-logo-div",children:[{tag:"div",id:"valor-logo",children:[{tag:"img",src:"https://developer.valorpaytech.com/images/logo.png",alt:"Valor"},]},]});let t={tag:"div",id:"card_options",children:[{tag:"div",id:"card-details",children:[]},]};"true"===h&&t.children[0].children.push({tag:"label",id:"label_email",children:["Email"]},{tag:"input",type:"email",name:"email",id:"cc_email",placeholder:"abc@xyz.com",required:"",autocomplete:"email",value:m,maxlength:255}),"true"===v&&t.children[0].children.push({tag:"label",id:"label_phone",children:["Phone"]},{tag:"input",type:"tel",name:"phone",id:"cc_phone",placeholder:"(123) 123-1234",maxlength:"14",autocomplete:"tel",value:$},{tag:"span",class:"card_error",id:"phone_num_error"}),"true"===b&&t.children[0].children.push({tag:"input",type:"text",name:"address1",id:"cc_address",placeholder:"Address line 1",value:x,maxlength:255},{tag:"input",type:"text",name:"address2",id:"cc_address_1",placeholder:"Address line 2",value:f,maxlength:255},{tag:"div",id:"address_ct",children:[{tag:"div",id:"passage-city",children:[{tag:"input",type:"text",name:"city",id:"cc_city",placeholder:"City",value:y,maxlength:25},]},{tag:"div",id:"passage-state",children:[{tag:"select",id:"cc_state",name:"state",children:[[{tag:"option",value:"Alabama",children:["Alabama"]},{tag:"option",value:"Alaska",children:["Alaska"]},{tag:"option",value:"Arizona",children:["Arizona"]},{tag:"option",value:"Arkansas",children:["Arkansas"]},{tag:"option",value:"California",children:["California"]},{tag:"option",value:"Colorado",children:["Colorado"]},{tag:"option",value:"Connecticut",children:["Connecticut"]},{tag:"option",value:"Delaware",children:["Delaware"]},{tag:"option",value:"Florida",children:["Florida"]},{tag:"option",value:"Georgia",children:["Georgia"]},{tag:"option",value:"Hawaii",children:["Hawaii"]},{tag:"option",value:"Idaho",children:["Idaho"]},{tag:"option",value:"Illinois",children:["Illinois"]},{tag:"option",value:"Indiana",children:["Indiana"]},{tag:"option",value:"Iowa",children:["Iowa"]},{tag:"option",value:"Kansas",children:["Kansas"]},{tag:"option",value:"Kentucky",children:["Kentucky"]},{tag:"option",value:"Louisiana",children:["Louisiana"]},{tag:"option",value:"Maine",children:["Maine"]},{tag:"option",value:"Maryland",children:["Maryland"]},{tag:"option",value:"Massachusetts",children:["Massachusetts"]},{tag:"option",value:"Michigan",children:["Michigan"]},{tag:"option",value:"Minnesota",children:["Minnesota"]},{tag:"option",value:"Mississippi",children:["Mississippi"]},{tag:"option",value:"Missouri",children:["Missouri"]},{tag:"option",value:"Montana",children:["Montana"]},{tag:"option",value:"Nebraska",children:["Nebraska"]},{tag:"option",value:"Nevada",children:["Nevada"]},{tag:"option",value:"New Hampshire",children:["New Hampshire"]},{tag:"option",value:"New Jersey",children:["New Jersey"]},{tag:"option",value:"New Mexico",children:["New Mexico"]},{tag:"option",value:"New York",children:["New York"]},{tag:"option",value:"North Carolina",children:["North Carolina"]},{tag:"option",value:"North Dakota",children:["North Dakota"]},{tag:"option",value:"Ohio",children:["Ohio"]},{tag:"option",value:"Oklahoma",children:["Oklahoma"]},{tag:"option",value:"Oregon",children:["Oregon"]},{tag:"option",value:"Pennsylvania",children:["Pennsylvania"]},{tag:"option",value:"Rhode Island",children:["Rhode Island"]},{tag:"option",value:"South Carolina",children:["South Carolina"]},{tag:"option",value:"South Dakota",children:["South Dakota"]},{tag:"option",value:"Tennessee",children:["Tennessee"]},{tag:"option",value:"Texas",children:["Texas"]},{tag:"option",value:"Utah",children:["Utah"]},{tag:"option",value:"Vermont",children:["Vermont"]},{tag:"option",value:"Virginia",children:["Virginia"]},{tag:"option",value:"Washington",children:["Washington"]},{tag:"option",value:"West Virginia",children:["West Virginia"]},{tag:"option",value:"Wisconsin",children:["Wisconsin"]},{tag:"option",value:"Wyoming",children:["Wyoming"]},],]},]},]},{tag:"input",type:"text",name:"zip_code",id:"cc-zip-code",placeholder:"Zip Code",minlength:"4",maxlength:"6",value:w});let a={tag:"div",id:"card-section",children:[{tag:"label",id:"card-label",children:["Card information"]},{tag:"div",id:"cards",children:[{tag:"input",type:"text",name:"cc_num",id:"cc-num",placeholder:"4111 1111 1111 1111",maxlength:"19",required:"",autocomplete:"cc-number",inputmode:"numeric"},{tag:"div",class:"d-flex",id:"card-icons",children:[{tag:"span",class:"card-icon",id:"visa",children:[{tag:"img",src:n+"ic_visa.svg"}]},{tag:"span",class:"card-icon",id:"amex",children:[{tag:"img",src:n+"ic_amex.svg"}]},{tag:"span",class:"card-icon",id:"mastercard",children:[{tag:"img",src:n+"ic_mastercard.svg"}]},{tag:"span",class:"card-icon",id:"discover",children:[{tag:"img",src:n+"ic_discover.svg"}]},{tag:"span",class:"card-icon",id:"jcb",children:[{tag:"img",src:n+"ic_jcb.svg"}]},{tag:"span",class:"card-icon",id:"diners",children:[{tag:"img",src:n+"ic_diners.png"}]},]},{tag:"span",class:"card_error",id:"card_number_error"},{tag:"div",id:"card_fields",children:[{tag:"div",class:"exp_div",id:"exp",children:[{tag:"input",type:"text",name:"cc_exp",id:"cc-exp",placeholder:"MM / YY",maxlength:"7",required:"",autocomplete:"cc-exp"},{tag:"span",class:"card_error",id:"card_exp_error"},]},{tag:"div",class:"cvv_div",id:"cvv",children:[{tag:"input",type:"password",name:"cc_cvv",id:"cc-cvv",placeholder:"CVV",maxlength:"3",required:"",autocomplete:"cc-csc"},{tag:"span",class:"card_error",id:"card_cvv_error"},]},]},]},]},i={tag:"div",id:"card-holder-section",children:[{tag:"div",id:"card-holder",children:[{tag:"label",id:"label_cardholder",children:["Name on Card"]},{tag:"input",type:"text",name:"cc_name",maxlength:"25",id:"cc-name",placeholder:"John Doe",required:"",autocomplete:"cc-name",value:g,pattern:"[\\p{L} \\-\\.]+"},]},]},l={tag:"div",id:"card-policy-section",children:[{tag:"div",id:"cc-policy",children:[{tag:"label",id:"label_policy",children:[{tag:"input",type:"checkbox",name:"cc-policy",class:"policy",id:"cc_policy",required:""},{tag:"span",id:"policy_text",children:[" I agree to the Valor Payments Terms of Service &amp; "]},]},{tag:"a",id:"privacy_policy",href:"https://valorpaytech.com/privacy-policy/",target:"_blank",children:[" Privacy Policy. "]},]},]},o={tag:"div",class:"valor-modal fade",id:"card-details-popup",style:"display: none;",children:[{tag:"div",id:"card-popup",children:[{tag:"div",id:"passage-popup-inner",children:[]},]},]};"lightbox"!==s?(t.children[0].children.push(a),"true"===u&&t.children[0].children.push(i),t.children[0].children.push(l),r.push(t),r.push({tag:"div",id:"card-submit-section",children:[{tag:"div",id:"passage-actions",children:[{tag:"button",id:"passage-submit",type:"submit",disabled:"",children:[k]},]},]})):(o.children[0].children[0].children.push(a),"true"===u&&o.children[0].children[0].children.push(i),o.children[0].children[0].children.push(l),o.children[0].children[0].children.push(...[{tag:"button",id:"passage-submit",disabled:"",children:[k]},{tag:"div",class:"cancel_button",id:"passage-cancel",children:["Cancel"]},]),t.children.push(o),r.push(t),r.push({tag:"div",id:"card-submit-section",children:[{tag:"div",id:"passage-actions",children:[{tag:"div",class:"pay-now-popup",id:"pay-now",children:["Pay Now"]},]},]}))}();!function e(t,a,i){if("string"==typeof a)i?t.appendChild(document.createTextNode(a)):t.innerHTML+=a;else if(Array.isArray(a))for(let n=0;n<a.length;n++)e(t,a[n],i);else{let r=document.createElement(a.tag);for(let l in a)"tag"!==l&&("children"===l?e(r,a[l],i):r.setAttribute(l,a[l]));t.appendChild(r)}}(document.getElementById("valor-fields"),r),"lightbox"===s&&(document.getElementById("pay-now").addEventListener("click",function(){return document.getElementById("card-details-popup").classList.add("in"),document.getElementById("card-details-popup").style.display="flex",!0}),document.getElementById("passage-cancel").addEventListener("click",function(){return document.getElementById("card-details-popup").classList.remove("in"),document.getElementById("card-details-popup").style.display="none",!0})),T=document.getElementById("cc_phone"),function e(){S=document.getElementById("card_number_error"),q=document.getElementById("card_exp_error"),D=document.getElementById("card_cvv_error"),P=document.getElementById("phone_num_error"),A=document.getElementById("passage-submit"),E=document.querySelector("input[name='cc_num']"),C=document.querySelector("input[name='cc_exp']"),L=document.querySelector("input[name='cc_cvv']"),V=document.querySelector("input[name='cc_name']"),E.addEventListener("input",function(){let e=this.value.replace(/[^0-9]/g,"");(function e(t){let a=[];a[0]="Unknown card type",a[1]="No card number provided",a[2]="Credit card number is in invalid format",a[3]="Credit card number is invalid",a[4]="Credit card number has an inappropriate number of digits",a[5]="Warning! This credit card number is associated with a scam attempt";let i=(e,t=null,a=null)=>({message:t,success:e,type:a}),n=[{cvv:3,icon:"visa",length:"13,19",name:"Visa",prefixes:"4"},{cvv:3,icon:"mastercard",length:"19",name:"MasterCard",prefixes:"51,52,53,54,55"},{cvv:4,icon:"amex",length:"18",name:"AmEx",prefixes:"34,37"},{cvv:3,icon:"discover",length:"19",name:"Discover",prefixes:"6011,622,64,65"},{cvv:3,icon:"jcb",length:"19",name:"JCB",prefixes:"35"},{cvv:3,icon:"diners",length:"19",name:"Diners",prefixes:"30,36,38,39"},];if(0==t.length)return i(!1,a[1]);if("5490997771092064"==(t=t.replace(/\s/g,"")))return i(!1,a[5]);let r=!1,l=!1,o="",d="",c="",s,p;for(let u=0;u<n.length;u++){let g=n[u].prefixes.split(",");for(let h=0;h<g.length;h++){let m=RegExp("^"+g[h]);m.test(t)&&(l=!0,S.innerText="",E.classList.remove("card-error"))}if(l){let v=n[u].length.split(",");for(let $=0;$<v.length;$++)t.length==v[$]&&(r=!0)}else document.querySelectorAll(".card-icon").forEach(function(e){e.style.display="none"});if(l)return o=n[u].name,c=(d=n[u].length.split(",")).pop(),s=n[u].icon,p=n[u].cvv,E.setAttribute("maxlength",c),L.setAttribute("maxlength",p),document.querySelectorAll(".card-icon").forEach(function(e){e.style.display="none"}),document.getElementById(s).style.display="inline",i(!0,null,o);if(r&&l)return i(!0,null,o=n[u].name)}return l?r?i(!0,null,o):i(!1,a[4]):i(!1,a[3])})(e),0===e.length&&document.querySelectorAll(".card-icon").forEach(function(e){e.style.display="inline"}),e.length>4&&(e=e.substring(0,4)+" "+e.substring(4)),e.length>9&&(e=e.substring(0,9)+" "+e.substring(9)),e.length>14&&(e=e.substring(0,14)+" "+e.substring(14)),this.value=e,W()}),V&&V.addEventListener("keypress",function(e){var t;t=String.fromCharCode(e.keyCode),!/[0-9~`!@#$%\^&*()+=\-\[\]\\';,/{}|\\":<>\?]/g.test(t)||e.preventDefault()});let t=document.getElementById("cc-zip-code");t&&(t.addEventListener("input",function(e){let t=e.target.value,a=t.replace(/[^a-zA-Z0-9]/g,""),i=a.substring(0,6);t!==a&&(e.target.value=i)}),t.addEventListener("paste",function(e){let t=e.clipboardData.getData("text"),a=t.replace(/[^a-zA-Z0-9]/g,""),i=a.substring(0,6);e.target.value=i,e.preventDefault()})),E.addEventListener("blur",function e(){let t=this.value.replace(/[^0-9]/g,"");""===t?(S.innerText="This field is required",I=!1):!function e(t){var a,i,n,r;for(n=0,a=t.split("").reverse(),i=0;n<a.length;n++)i+=(r=a[n]*(1+n%2))>9?r-9:r;return i%10==0}(t)||t.length<10?(S.innerText="Your card number is invalid.",I=!1):(S.innerText="",I=!0),this.classList.toggle("card-error",!I),W()}),C.addEventListener("input",function(){let e=this.value.replace(/[^0-9]/g,""),t="";for(let a=0;a<e.length;a++)2===a&&(t+=" / "),t+=e[a];let i=new Date().getMonth()+1,n=new Date().getFullYear().toString().slice(-2),r=parseInt(n),l=parseInt(e.slice(0,2)),o=parseInt(e.slice(-2));q.innerText="",""===e?N=!1:e.length>=2&&l>12?(q.innerText="Invalid month",N=!1):e.length>=4&&o<r||o===r&&l<i?(q.innerText="Your card is expired",N=!1):e.length>=4&&o>r+20?(q.innerText="Year is too far into the future",N=!1):N=!(e.length<4),this.value=t,this.classList.toggle("card-error",!N),W()}),C.addEventListener("blur",function e(){let t=this.value.replace(/[^0-9]/g,"");""===t?(q.innerText="This field is required",N=!1):t.length<4&&(q.innerText="Your card's expiration date is incomplete.",N=!1),this.classList.toggle("card-error",!N),W()}),L.addEventListener("input",function(){let e=this.value.replace(/[^0-9]/g,"");D.innerText="",L.classList.remove("card-error"),M=!1,(3==e.length||4==e.length)&&(M=!0),W()}),L.addEventListener("blur",function e(){let t=this.value.replace(/[^0-9]/g,"");""===t?(D.innerText="This field is required",L.classList.add("card-error"),M=!1):t.length<3?(D.innerText="Invalid CVV length",L.classList.add("card-error"),M=!1):(D.innerText="",L.classList.remove("card-error"),M=!0),W()}),"true"===v&&(T.addEventListener("input",j),T.addEventListener("load",j),T.addEventListener("blur",H))}(),"true"===v&&j(),"true"===b&&(document.getElementById("cc_state").value=_),function e(){let t=document.querySelector("#valor-checkout-form");t.addEventListener("submit",e=>{if(e.preventDefault(),!I||!N||!M){alert("Enter valid card information");return}A.disabled=!0;let a=document.createElement("div");a.classList.add("passage-loader"),A.insertAdjacentElement("afterend",a);try{let i=new FormData(t),n={client_token:l,epi:o,txn_type:"cardToken",pan:i.get("cc_num").replace(/\s/g,""),expirydate:i.get("cc_exp").replace(" / ","")},r=new URLSearchParams(n).toString();fetch(`${c}?${r}`,{headers:{Accept:"*/*"},method:"POST"}).then(e=>e.json()).then(e=>{if(!e.cardToken){alert("Something went wrong, please reload the page."),A.disabled=!1,a.remove();return}i.set("card_token",e.cardToken),i.delete("cc_num"),i.delete("cc_exp"),i.delete("cc_cvv"),t.formData=i;let n=document.getElementById("valorpay-hidden-form");n&&n.parentNode.removeChild(n);let r=document.createElement("form");for(let[l,o]of(r.setAttribute("id","valorpay-hidden-form"),r.style.display="none",r.method=t.method,r.action=t.action,document.body.appendChild(r),i.entries())){let d=document.createElement("input");d.type="hidden",d.name=l,d.value=o,r.appendChild(d)}let c=new CustomEvent("passageHiddenFormAdded",{detail:{form:r}});document.dispatchEvent(c);let s=document.createElement("input");s.style.display="none",s.type="submit",r.appendChild(s).click(),r.removeChild(s)}).catch(e=>{console.error("Error:",e),alert("Something went wrong, please reload the page."),A.disabled=!1,a.remove()})}catch(d){alert("Payment request failed. Please try again.")}})}()}}}();document.addEventListener("DOMContentLoaded",function(){PassageJs.init()});
